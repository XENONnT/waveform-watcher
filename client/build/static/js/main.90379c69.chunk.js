(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{127:function(e,t,a){e.exports=a(173)},132:function(e,t,a){},133:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},170:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){"use strict";a.r(t);var n=a(9),o=a.n(n),l=a(44),r=a.n(l),i=(a(132),a(1)),c=a(4),s=a(2),u=a(3),d=(a(133),a(35)),h=a(67),p=a.n(h),m=function(e,t,a){return function(n){console.log(t);var o=JSON.stringify({user:e,run_id:t,build_low_level:a});p.a.post("".concat("https://waveform-watcher-flask-backend.azurewebsites.net/","/api/gw"),o,{headers:{"Content-Type":"application/json",withCredentials:!0}}).then((function(e){return console.log(e.data),n({type:"GET_WAVEFORM_SUCCESS",payload:{run_id:t,build_low_level:a,bokeh_model:e.data}}),e.data})).catch((function(e){console.log(e),n({type:"GET_WAVEFORM_FAILURE"})}))}},v=function(e,t,a,n,o,l){return function(r){console.log("save waveform action called");var i=JSON.stringify({user:e,tag:t,comments:a,bokeh_model:n,run_id:o,build_low_level:l});p.a.post("".concat("https://waveform-watcher-flask-backend.azurewebsites.net/","/api/sw"),i,{headers:{"Content-Type":"application/json",withCredentials:!0}}).then((function(e){console.log(e.data),200===e.status?r({type:"SAVE_WAVEFORM_SUCCESS"}):r({type:"SAVE_WAVEFORM_FAILURE"})})).catch((function(e){console.log(e),r({type:"SAVE_WAVEFORM_FAILURE"})}))}},b=function(e,t,a){return function(n){n({type:"SWITCH_WAVEFORM",payload:{run_id:e,build_low_level:t,bokeh_model:a}})}},f=function(e,t){return function(a){var n=JSON.stringify({user:e,tag:t});p.a.post("".concat("https://waveform-watcher-flask-backend.azurewebsites.net/","/api/dw"),n,{headers:{"Content-Type":"application/json",withCredentials:!0}}).then((function(e){console.log(e.data),200===e.status?a({type:"DELETE_WAVEFORM_SUCCESS"}):a({type:"DELETE_WAVEFORM_FAILURE"})})).catch((function(e){console.log(e),a({type:"DELETE_WAVEFORM_FAILURE"})}))}},g=function(){return function(e){console.log("authenticate action called"),p.a.get("".concat("https://waveform-watcher-node-backend.azurewebsites.net/","/auth"),{withCredentials:!0}).then((function(t){var a;console.log("Auth response with status"+t.data.status),200===t.data.status?(e({type:"AUTH_SUCCESS",payload:t.data}),e((a=t.data.user,function(e){console.log(a),p.a.get("".concat("https://waveform-watcher-flask-backend.azurewebsites.net/","/api/data?user=").concat(a),{withCredentials:!0}).then((function(t){return 200===t.status?e({type:"LOAD_SUCCESS",payload:t.data}):e({type:"LOAD_FAILURE"})}))}))):e({type:"AUTH_ERROR"})})).catch((function(t){console.log(t),e({type:"AUTH_ERROR"})}))}},E=function(){return function(e){console.log("logout action called"),e({type:"LOGOUT"})}},_=a(65),y=a(108),O=a(43),w={id:"",isAuthenticated:null,user:""},C=a(5),j={user:"",run_id:"",build_low_level:null,bokeh_model:void 0,tags_data:[],available_runs:[]},S=Object(_.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(console.log("received action of type "+t.type+" and data "+JSON.stringify(t.payload)),t.type){case"AUTH_SUCCESS":return Object(O.a)(Object(O.a)({},e),{},{isAuthenticated:!0,user:t.payload.user,id:t.payload.id});case"LOGOUT":case"AUTH_ERROR":case"LOGIN_ERROR":return Object(O.a)(Object(O.a)({},e),{},{isAuthenticated:!1});case"LOGIN_SUCCESS":default:return e}},waveform:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(console.log("received action of type "+t.type+" and data "+JSON.stringify(t.payload)),t.type){case"LOAD_SUCCESS":var a=[];return console.log(t.payload.available_runs),Object.entries(t.payload.available_runs).map((function(e){var t=Object(C.a)(e,2),n=(t[0],t[1]);return a.push(n)})),{user:t.payload.user,run_id:t.payload.run_id,build_low_level:t.payload.build_low_level,bokeh_model:t.payload.bokeh_model,tags_data:t.payload.tags_data,available_runs:a};case"SWITCH_WAVEFORM":case"GET_WAVEFORM_SUCCESS":return Object(O.a)(Object(O.a)({},e),{},{run_id:t.payload.run_id,build_low_level:t.payload.build_low_level,bokeh_model:t.payload.bokeh_model});default:return e}}}),k=[y.a],A=Object(_.e)(S,{},Object(_.d)(_.a.apply(void 0,k))),L=a(70),R=a(34),T=(a(154),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{id:"header"},o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("div",{style:{marginRight:"25%"}},o.a.createElement("h2",{id:"title"},"Waveform watcher"))),o.a.createElement("div",{id:"logout"},o.a.createElement("a",{href:"https://waveform-watcher-node-backend.azurewebsites.net//logout",onClick:this.handleOnClick,style:{color:"white"}},"Logout")))}}]),a}(n.Component)),W=(a(155),a(124)),D=a(117),N=a.n(D),U=a(18),x=a(177),I=a(176),F=a(118),M=function(e,t){return{label:e,data:t}},V=[],B=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={isLoading:!1,data_loaded:!1,show:!1,options:V,value:void 0,comments:""},e.loadOptions=function(){var t=[];e.props.tags_data.map((function(e){return Object.entries(e).map((function(e){var a=Object(C.a)(e,2),n=a[0],o=a[1];return t.push(M(n,o))}))})),console.log(t),e.setState({options:t},(function(){console.log("state is now:",e.state.options)}))},e.handleChangeSelect=function(t,a){if(console.group("Value Changed"),console.log(t),console.log("action: ".concat(a.action)),console.groupEnd(),e.setState({value:t}),"select-option"===a.action){e.setState({comments:t.data.comments});var n=t.data,o=n.run_id,l=n.build_low_level,r=n.bokeh_model;r&&o&&l&&e.props.dispatch(b(o,l,r))}},e.handleChangeTextArea=function(t){var a=e.state,n=a.value,o=a.options;if(n){var l=t.target.value,r=n.data;e.setState({comments:l,value:n?Object(O.a)(Object(O.a)({},n),{},{data:Object(O.a)(Object(O.a)({},r),{},{comments:l})}):n,options:o.map((function(e){return n&&e.label===n.label?Object(O.a)(Object(O.a)({},e),{},{data:Object(O.a)(Object(O.a)({},r),{},{comments:l})}):e}))}),console.log("onchange comments")}else e.setState({comments:t.target.value})},e.handleCreateOption=function(t){e.setState({isLoading:!0}),console.group("Option created"),console.log("Wait a moment..."),setTimeout((function(){var a=e.state.options,n=M(t,{});console.log(n),console.groupEnd(),e.setState({isLoading:!1,options:[].concat(Object(U.a)(a),[n]),value:n,comments:""})}),1e3)},e.handleSave=function(){var t=e.state.value,a=e.props,n=a.user,o=a.bokeh_model,l=a.run_id,r=a.build_low_level;if(t&&o){var i=t.label,c=t.data.comments;e.props.dispatch(v(n,i,c,o,l,r))}else e.handleShow()},e.handleDelete=function(){var t=e.state,a=t.value,n=t.options,o=e.props.user,l=a.label,r=n.filter((function(e){return e.label!==a.label}));console.log(a),console.log(r),e.setState({options:r,value:{}},(function(){return console.log(e.state.value)})),e.props.dispatch(f(o,l))},e.handleClose=function(){return e.setState({show:!1})},e.handleShow=function(){return e.setState({show:!0})},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){var e=this.state.data_loaded;this.props.tags_data&&!e&&(console.log("tags data is:"+this.props.tags_data),this.loadOptions(),this.setState({data_loaded:!0}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.options,n=e.value,l=e.comments,r=e.show,i=e.data_loaded;return o.a.createElement("div",{id:"comment-box"},o.a.createElement("strong",null," Tags & Comments "),o.a.createElement("br",null),o.a.createElement(F.a,{isClearable:!0,isDisabled:!i,isLoading:t,onChange:this.handleChangeSelect,onCreateOption:this.handleCreateOption,options:a,value:n}),o.a.createElement("div",{className:"form-group"},o.a.createElement("textarea",{className:"form-control",id:"comments",rows:"5",style:{lineHeight:"100%",height:"200px"},onChange:this.handleChangeTextArea,value:l})),o.a.createElement(x.a,{variant:"secondary",size:"sm",onClick:this.handleSave,type:"submit",active:!0},"Save Waveform under Tag",n?" "+n.label:""),o.a.createElement(I.a,{show:r,onHide:this.handleClose},o.a.createElement(I.a.Header,{closeButton:!0},o.a.createElement(I.a.Title,null,"Save error")),o.a.createElement(I.a.Body,null,"You need to enter a tag AND get a waveform to save!"),o.a.createElement(I.a.Footer,null,o.a.createElement(x.a,{variant:"secondary",onClick:this.handleClose},"Close"))),o.a.createElement(x.a,{style:{marginTop:"10px"},variant:"danger",size:"sm",onClick:this.handleDelete,disabled:!n},"Delete Tag ",n?n.label:""))}}]),a}(n.Component),H=Object(d.b)((function(e){return{user:e.waveform.user,tags_data:e.waveform.tags_data,bokeh_model:e.waveform.bokeh_model,run_id:e.waveform.run_id,build_low_level:e.waveform.build_low_level}}),null)(B),G=a(92),z=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={options:[]},e.handleStateChangeRunID=function(t,a){var n=a.action;a.removedValue;switch(n){case"select-option":e.props.handleStateChangeRunID(t)}},e.handleStateChangeBuildLevel=function(t,a){var n=a.action;a.removedValue;switch(n){case"select-option":e.props.handleStateChangeBuildLevel(t)}},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){var e=this,t=this.props.available_runs,a=this.state.options;if(t&&a.length!==t.length){var n=t.map((function(e){return{label:e}}));this.setState({options:n},(function(){console.log(e.state.options)}))}}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("strong",null,"Run ID: "),o.a.createElement(G.a,{options:this.state.options,onChange:this.handleStateChangeRunID}),o.a.createElement("br",null),o.a.createElement("strong",null,"Build low-level: "),o.a.createElement(G.a,{options:[{label:"true"},{label:"false"}],onChange:this.handleStateChangeBuildLevel}))}}]),a}(n.Component),J=Object(d.b)((function(e){return{available_runs:e.waveform.available_runs}}),null)(z),Y=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={show:!1},e.handleGetWaveform=function(){var t=e.props,a=t.user,n=t.run_id,o=t.build_low_level;n&&o?(e.props.handleLoading(),console.log(a,n,o),e.props.dispatch(m(a,n,o))):e.handleShow()},e.handleClose=function(){return e.setState({show:!1})},e.handleShow=function(){return e.setState({show:!0})},e}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{id:"gw-div-old",style:{marginTop:"10px"}},o.a.createElement(x.a,{variant:"secondary",size:"sm",onClick:this.handleGetWaveform,active:!0},"Get New Waveform"),o.a.createElement(I.a,{show:this.state.show,onHide:this.handleClose},o.a.createElement(I.a.Header,{closeButton:!0},o.a.createElement(I.a.Title,null,"Get Waveform error")),o.a.createElement(I.a.Body,null,"You need to enter a run id and specify a build level to get a waveform!"),o.a.createElement(I.a.Footer,null,o.a.createElement(x.a,{variant:"secondary",onClick:this.handleClose},"Close"))))}}]),a}(n.Component),P=Object(d.b)(null,null)(Y),X=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{id:"param",style:{paddingTop:"20px"}},o.a.createElement("strong",null,"Run ID: "),o.a.createElement("input",{value:this.props.run_id,contentEditable:!1}),o.a.createElement("strong",{style:{marginLeft:"10px"}},"Build Low Level: "),o.a.createElement("input",{value:this.props.build_low_level,contentEditable:!1}))}}]),a}(n.Component),$=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={run_id:e.props.run_id,bokeh_model:e.props.bokeh_model,build_low_level:!0,isLoading:!0},e.handleStateChangeRunID=function(t){e.setState({run_id:t.label})},e.handleStateChangeBuildLevel=function(t){e.setState({build_low_level:t.label})},e.handleLoading=function(){e.setState({isLoading:!0})},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){var e=this;this.state.bokeh_model!==this.props.bokeh_model&&this.props.bokeh_model&&this.setState({isLoading:!1},(function(){e.deleteWaveform(),e.loadWaveform(),e.setState({bokeh_model:e.props.bokeh_model})}))}},{key:"deleteWaveform",value:function(){for(var e=document.getElementById("graph");e&&e.hasChildNodes();)e.removeChild(e.childNodes[0])}},{key:"loadWaveform",value:function(){console.log("loading waveform"),this.deleteWaveform(),this.state.bokeh_model!==this.props.bokeh_model&&W.a.embed_item(this.props.bokeh_model,"graph")}},{key:"render",value:function(){var e=this.state,t=e.run_id,a=e.build_low_level,n=e.isLoading;return o.a.createElement("div",{id:"graph-container"},o.a.createElement("div",{id:"control-box"},o.a.createElement("div",{id:"control"},o.a.createElement("h3",null," Control "),o.a.createElement(J,{handleStateChangeRunID:this.handleStateChangeRunID,handleStateChangeBuildLevel:this.handleStateChangeBuildLevel}),o.a.createElement(P,{run_id:t,build_low_level:a,user:this.props.user,handleLoading:this.handleLoading}),o.a.createElement(H,null))),o.a.createElement("div",{id:"graph-box"},o.a.createElement(N.a,{isLoading:n},o.a.createElement(X,{run_id:this.props.run_id,build_low_level:this.props.build_low_level}),o.a.createElement("div",{id:"graph"}))))}}]),a}(n.Component),q=Object(d.b)((function(e){return{user:e.waveform.user,isAuthenticated:e.auth.isAuthenticated,run_id:e.waveform.run_id,bokeh_model:e.waveform.bokeh_model,build_low_level:e.waveform.build_low_level}}),null)($),K=(a(170),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).handleOnClick=function(){e.props.dispatch(E),console.log("clicked logout")},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log("Waveform rendered")}},{key:"render",value:function(){return this.props.isAuthenticated?o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(T,null),o.a.createElement("div",{className:"body",style:{textAlign:"center"}},o.a.createElement(q,null)))):o.a.createElement(R.a,{to:"/login"})}}]),a}(n.Component)),Q=Object(d.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),null)(K),Z=(a(172),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log("lifecycle method called")}},{key:"render",value:function(){return this.props.isAuthenticated?o.a.createElement(R.a,{to:"/"}):o.a.createElement("div",{id:"container"},o.a.createElement("div",{className:"row",style:{paddingTop:"5%"}},o.a.createElement("div",{className:"col-md-4 col-sm-3 col-xs-1"}),o.a.createElement("div",{className:"col-md-4 col-sm-6 col-xs-9",style:{backgroundColor:"cadetblue",borderColor:"#aaaaaa"}},o.a.createElement("br",null),o.a.createElement("h5",null,"Welcome to Waveform Watcher"),o.a.createElement("div",{className:"block"},o.a.createElement("strong",{style:{font:400}},"Username"),o.a.createElement("br",null),o.a.createElement("input",{type:"text",className:"form-control"})),o.a.createElement("div",{className:"block"},o.a.createElement("strong",{style:{font:400}},"Password"),o.a.createElement("br",null),o.a.createElement("input",{type:"password",className:"form-control"})),o.a.createElement("div",{className:"github"},o.a.createElement("a",{className:"btn btn-block btn-social btn-large btn-github",style:{maxWidth:"300px"},href:"https://waveform-watcher-node-backend.azurewebsites.net//auth/github"},o.a.createElement("i",{className:"fab fa-github"}),o.a.createElement("span",null,"Login with GitHub"))),o.a.createElement("br",null),o.a.createElement("div",{className:"row",style:{paddingTop:"100px"}}))))}}]),a}(n.Component)),ee=Object(d.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),null)(Z),te=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch(g()),this.render()}},{key:"render",value:function(){return this.props.isAuthenticated?o.a.createElement(R.a,{to:"/"}):o.a.createElement("div",null,o.a.createElement("h2",null,"Login succeeded: Redirecting... "))}}]),a}(n.Component),ae=Object(d.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),null)(te),ne=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.render()}),1e4)}},{key:"render",value:function(){return this.props.isAuthenticated?o.a.createElement("div",null,o.a.createElement("h2",null,"Login failed: Redirecting... "),o.a.createElement("h5",null,"Login could fail because your github is not part of the XENON organization")):o.a.createElement(R.a,{to:"/login"})}}]),a}(n.Component),oe=Object(d.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),null)(ne),le=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return console.log("Routes props",this.props.isAuthenticated),o.a.createElement(L.a,null,o.a.createElement("div",{style:{height:"100vh"}},o.a.createElement(R.b,{exact:!0,path:"/login",component:ee}),o.a.createElement(R.b,{exact:!0,path:"/login/success",component:ae}),o.a.createElement(R.b,{exact:!0,path:"/login/failure",component:oe}),o.a.createElement(R.b,{exact:!0,path:"/",component:Q})))}}]),a}(n.Component),re=Object(d.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),null)(le),ie=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){A.dispatch(g())}},{key:"render",value:function(){return o.a.createElement(d.a,{store:A},o.a.createElement("div",{className:"App"},o.a.createElement(re,{id:"routes"})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[127,1,2]]]);
//# sourceMappingURL=main.90379c69.chunk.js.map